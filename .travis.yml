sudo: false
language: python
services:
  - docker
python:
  - "3.6"
install: pip install tox-travis
jobs:
  include:
    - stage: test
      name: Python Tox Tests
      script: tox
    - stage: test
      name: CSS Tests
      script: docker-compose run css-test
# NOTE (felix): Analyze failed CSS tests within Travis CI (if they work
# locally):
# 1. Activate the following lines to let Travis CI send the diff file that
# is generated by Backstop JS via HTTP POST request to a publicly
# IP address. If you don't have one available, you can use ngrok
# (https://ngrok.com/) to get a temporary IP address and expose your
# local machine via this address.
# 2. Start a web server listening to POST requests on that IP address.
# You can use the helpers/echo_server.py script to start a simple python
# webserver that writes the POST requst data to a file.
# 3. Open the file and check the diff results.
#after_failure:
#  - "./helpers/dump-backstop.sh"
